"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.main = void 0;
const kube_1 = require("./kube");
const fetch_1 = require("./fetch");
async function main(keptnApiUrl, keptnApiToken, keptnContext, keptnTypeEvent, getFromKube, kubeSettings, awaitTime, countEffort, delayTime) {
    if (getFromKube) {
        console.log('Sending event with Kubernetes connection.');
        return (0, kube_1.getKubeEvent)(kubeSettings, keptnContext, keptnTypeEvent, awaitTime, countEffort, delayTime);
    }
    else {
        console.log('Sending event with API URL and token.');
        const keptnUrl = new URL(keptnApiUrl);
        keptnUrl.pathname = 'api/mongodb-datastore/event';
        keptnUrl.searchParams.append('keptnContext', keptnContext);
        console.log(`Request URL: ${keptnUrl.href}`);
        return (0, fetch_1.getApiEvent)(keptnUrl.href, keptnApiToken, keptnTypeEvent, awaitTime, countEffort, delayTime);
    }
}
exports.main = main;
